(this["webpackJsonpcanvas-app"]=this["webpackJsonpcanvas-app"]||[]).push([[0],{18:function(t,e,n){},19:function(t,e,n){},20:function(t,e,n){},23:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),i=n(9),o=n.n(i),s=(n(18),n(19),n(12)),r=n(8),u=n(11),h=n(3),l=n(13),f=(n(20),n(5)),v=n(6),d=new(function(){function t(){Object(f.a)(this,t),this._history=[],this._defaultSnapshot=new Map}return Object(v.a)(t,[{key:"saveState",value:function(t){var e=new Map;t.forEach((function(t,n){e.set(n,t.getState())})),this._history.push(e)}},{key:"getRecentStates",value:function(){return this._history.pop()}},{key:"setDefaultSnapshot",value:function(t){var e=new Map;t.forEach((function(t,n){e.set(n,t.getState())})),this._defaultSnapshot=e}},{key:"defaultSnapshot",get:function(){return this._defaultSnapshot}},{key:"cleanHistory",value:function(){this._history=[]}},{key:"isHistoryEmpty",value:function(){return!this._history.length}}]),t}()),b=(n(21),n(10)),x=n(1);var j=function(t){var e=t.items,n=Object(l.a)(t,["items"]),a=Object(c.useState)(Object(b.a)()),i=Object(h.a)(a,2),o=i[0],f=i[1],v=Object(c.useState)([0,0]),j=Object(h.a)(v,2),y=j[0],_=j[1],k=Object(c.useState)(!1),O=Object(h.a)(k,2),p=O[0],g=O[1],L=Object(c.useState)(),w=Object(h.a)(L,2),C=w[0],P=w[1],m=Object(c.useState)(e||[]),S=Object(h.a)(m,2),E=S[0],I=S[1];Object(c.useEffect)((function(){I(e)}),[e]);var M=Object(c.useRef)(null),D=Object(c.useCallback)((function(){var t=M.current,e=t.getContext("2d");return{canvas:t,context:e}}),[M]),X=Object(c.useCallback)((function(){var t=D(),e=t.context,n=t.canvas;e.clearRect(0,0,n.width,n.height),E.forEach((function(t){return n=t,e.beginPath(),e.fillStyle=n.color,e.shadowColor=n.color,e.shadowBlur=o.has(n.id)?16:0,e.fill(n.path),void e.closePath();var n}))}),[D,E,o]),Y=Object(c.useCallback)((function(){P(window.setInterval((function(){X()}),17))}),[X]),F=Object(c.useCallback)((function(){d.saveState(E)}),[E]),R=Object(c.useCallback)((function(){var t=d.getRecentStates();E.forEach((function(e,n){var c=null===t||void 0===t?void 0:t.get(n);c&&e.restoreState(c)}))}),[E]);Object(c.useLayoutEffect)((function(){y[0]&&y[1]&&o.forEach((function(t){t.setClickStartingPoint.apply(t,Object(u.a)(y))}))}),[o,y]);var B=Object(c.useCallback)((function(){window.clearInterval(C),X()}),[C,X]),H=Object(c.useCallback)((function(){d.cleanHistory();var t=d.defaultSnapshot;E.forEach((function(e,n){var c=null===t||void 0===t?void 0:t.get(n);c&&e.restoreState(c)}))}),[E]),N=Object(c.useCallback)((function(){R(),X()}),[X,R]),J=Object(c.useCallback)((function(){H(),X()}),[X,H]);Object(c.useEffect)((function(){X(),d.setDefaultSnapshot(E)}),[]);var T=Object(c.useCallback)((function(t,e,n){var c,a=D().context,i=Object(r.a)(E);try{for(i.s();!(c=i.n()).done;){var o=c.value;if(a.isPointInPath(o.path,t.offsetX,t.offsetY))return e(t,o)}}catch(s){i.e(s)}finally{i.f()}n&&n(t)}),[E,D]),A=Object(c.useCallback)((function(t){var e,n=D().context,c=Object(r.a)(E);try{for(c.s();!(e=c.n()).done;){var a=e.value;n.isPointInPath(a.path,t.offsetX,t.offsetY)&&f(o.set(a.id,a))}}catch(i){c.e(i)}finally{c.f()}}),[E,D,o]),K=Object(c.useCallback)((function(t){F(),_([t.offsetX,t.offsetY]),g(!0),Y()}),[F,Y]);return Object(c.useEffect)((function(){var t=D().canvas;function e(t){p&&o.forEach((function(e){e.moveItem(t.offsetX,t.offsetY)}))}function n(t){if(t.ctrlKey)return T(t,(function(t,e){f(o.set(e.id,e)),K(t)}));T(t,(function(t,e){var n=o.clear();f(n.set(e.id,e)),K(t)}),(function(){f(o.clear())}))}function c(t){o.forEach((function(t){return t.clearClickStartingPoint()})),g(!1),B(),_([0,0])}return t.addEventListener("mousedown",n),t.addEventListener("mouseup",c),t.addEventListener("mousemove",e),function(){window.clearInterval(C),t.removeEventListener("mousedown",n),t.removeEventListener("mouseup",c),t.removeEventListener("mousemove",e)}}),[E,y,X,D,C,F,o,f,Y,B,p,A,T,K]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"canvas-container",children:Object(x.jsx)("canvas",Object(s.a)({height:700,width:700,ref:M},n))}),Object(x.jsxs)("div",{className:"buttons-container",children:[Object(x.jsx)("button",{onClick:N,children:"Undo"}),Object(x.jsx)("button",{onClick:J,children:"Reset"})]})]})};var y=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},_=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"black";Object(f.a)(this,t),this._xLoc=void 0,this._yLoc=void 0,this._scale=1,this._path=void 0,this._color=void 0,this._id=void 0,this._dClickX=0,this._dClickY=0,this._path=e,this._xLoc=n,this._yLoc=c,this._color=a,this._movePath(),this._id=y()}return Object(v.a)(t,[{key:"id",get:function(){return this._id}},{key:"color",get:function(){return this._color}},{key:"path",get:function(){return this._path}},{key:"scale",get:function(){return this._scale}},{key:"xLoc",get:function(){return this._xLoc}},{key:"yLoc",get:function(){return this._yLoc}},{key:"_movePath",value:function(t,e){var n=new DOMMatrix;n.e="undefined"!==typeof t?t-this._xLoc:this._xLoc,n.f="undefined"!==typeof e?e-this._yLoc:this._yLoc,n.e-=this._dClickX,n.f-=this._dClickY;var c=new Path2D;c.addPath(this._path,n),this._path=c}},{key:"setClickStartingPoint",value:function(t,e){this._dClickX=t-this._xLoc,this._dClickY=e-this._yLoc}},{key:"clearClickStartingPoint",value:function(){this._dClickX=0,this._dClickY=0}},{key:"moveItem",value:function(t,e){this._movePath(t,e),this._xLoc=t-this._dClickX,this._yLoc=e-this._dClickY}},{key:"getState",value:function(){return{xLoc:this._xLoc,yLoc:this._yLoc}}},{key:"restoreState",value:function(t){this._movePath(t.xLoc,t.yLoc),this._xLoc=t.xLoc,this._yLoc=t.yLoc}}]),t}(),k=new Path2D;k.rect(0,0,100,100);var O=new Path2D;O.arc(50,40,50,0,2*Math.PI);var p=new Path2D;p.arc(0,0,70,0,2*Math.PI);var g=new Path2D;g.arc(0,0,70,0,Math.PI);var L=new Path2D;L.ellipse(0,0,30,70,Math.PI/4,0,2*Math.PI);var w=new Path2D;w.ellipse(0,0,60,70,Math.PI/2,0,2*Math.PI);var C=[new _(k,0,0,"red"),new _(O,150,150),new _(p,200,350,"green"),new _(O,500,410,"blue"),new _(L,400,400,"orange"),new _(w,500,500,"darkcyan"),new _(g,600,10,"yellow")];var P=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(j,{items:C})})},m=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),c(t),a(t),i(t),o(t)}))};o.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(P,{})}),document.getElementById("root")),m()}},[[23,1,2]]]);
//# sourceMappingURL=main.07db3bfb.chunk.js.map